import base64
code="CmltcG9ydCBweW1vbmdvCmltcG9ydCB1cmxsaWIyCmltcG9ydCB1cmxsaWIKaW1wb3J0IGNvb2tpZWxpYgppbXBvcnQgcmFuZG9tCmltcG9ydCByZQppbXBvcnQgc3RyaW5nCmltcG9ydCBzeXMKaW1wb3J0IGdldG9wdAoKIyBpbml0IHRoZSBnbG9iYWwgY29va2llIGphcgpjaiA9IGNvb2tpZWxpYi5Db29raWVKYXIoKQojIGRlY2xhcmUgdGhlIHZhcmlhYmxlcyB0byBjb25uZWN0IHRvIGRiCmNvbm5lY3Rpb24gPSBOb25lCmRiID0gTm9uZQp3ZWJob3N0ID0gImxvY2FsaG9zdDo4MDgyIgptb25nb3N0ciA9ICJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3IgpkYl9uYW1lID0gImJsb2ciCgojIHRoaXMgc2NyaXB0IHdpbGwgY2hlY2sgdGhhdCBob21ld29yayAzLjIgaXMgY29ycmVjdAoKIyBtYWtlcyBhIGxpdHRsZSBzYWx0CmRlZiBtYWtlX3NhbHQobik6CiAgICBzYWx0ID0gIiIKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHNhbHQgPSBzYWx0ICsgcmFuZG9tLmNob2ljZShzdHJpbmcuYXNjaWlfbGV0dGVycykKICAgIHJldHVybiBzYWx0CgoKIyB0aGlzIGlzIGEgdmFsaWRhdGlvbiBzY3JpcHQgdG8gbWFrZSBzdXJlIHRoZSBibG9nIHdvcmtzIGNvcnJlY3RseS4KCmRlZiBjcmVhdGVfdXNlcih1c2VybmFtZSwgcGFzc3dvcmQpOgogICAgCiAgICBnbG9iYWwgY2oKCiAgICB0cnk6CiAgICAgICAgcHJpbnQgIlRyeWluZyB0byBjcmVhdGUgYSB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9zaWdudXAiLmZvcm1hdCh3ZWJob3N0KQoKICAgICAgICBkYXRhID0gdXJsbGliLnVybGVuY29kZShbKCJlbWFpbCIsIiIpLCgidXNlcm5hbWUiLHVzZXJuYW1lKSwgKCJwYXNzd29yZCIscGFzc3dvcmQpLCAoInZlcmlmeSIscGFzc3dvcmQpXSkKICAgICAgICByZXF1ZXN0ID0gdXJsbGliMi5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIyLmJ1aWxkX29wZW5lcih1cmxsaWIyLkhUVFBDb29raWVQcm9jZXNzb3IoY2opKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICB1c2VycyA9IGRiLnVzZXJzCiAgICAgICAgIyBjaGVjayB0aGF0IHRoZSB1c2VyIGlzIGluIHVzZXJzIGNvbGxlY3Rpb24KICAgICAgICB1c2VyID0gdXNlcnMuZmluZF9vbmUoeydfaWQnOnVzZXJuYW1lfSkKICAgICAgICBpZiAodXNlciA9PSBOb25lKToKICAgICAgICAgICAgcHJpbnQgIkNvdWxkIG5vdCBmaW5kIHRoZSB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUsICJpbiB0aGUgdXNlcnMgY29sbGVjdGlvbi4iCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHByaW50ICJGb3VuZCB0aGUgdGVzdCB1c2VyICIsIHVzZXJuYW1lLCAiIGluIHRoZSB1c2VycyBjb2xsZWN0aW9uIgoKICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIHVzZXIgaGFzIGJlZW4gYnVpbHQKICAgICAgICByZXN1bHQgPSBmLnJlYWQoKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKCJXZWxjb21lXHMrIisgdXNlcm5hbWUpCiAgICAgICAgaWYgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgICAgICBwcmludCAiV2hlbiB3ZSB0cmllZCB0byBjcmVhdGUgYSB1c2VyLCBoZXJlIGlzIHRoZSBvdXRwdXQgd2UgZ290XG4iCiAgICAgICAgcHJpbnQgcmVzdWx0CiAgICAgICAgCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHRyeV90b19sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpOgoKICAgIHRyeToKICAgICAgICBwcmludCAiVHJ5aW5nIHRvIGxvZ2luIGZvciB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9sb2dpbiIuZm9ybWF0KHdlYmhvc3QpCgogICAgICAgIGRhdGEgPSB1cmxsaWIudXJsZW5jb2RlKFsoInVzZXJuYW1lIix1c2VybmFtZSksICgicGFzc3dvcmQiLHBhc3N3b3JkKV0pCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpCiAgICAgICAgb3BlbmVyID0gdXJsbGliMi5idWlsZF9vcGVuZXIodXJsbGliMi5IVFRQQ29va2llUHJvY2Vzc29yKGNqKSkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBsb2dpbgogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUoIldlbGNvbWVccysiKyB1c2VybmFtZSkKICAgICAgICBpZiBleHByLnNlYXJjaChyZXN1bHQpOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICBwcmludCAiV2hlbiB3ZSB0cmllZCB0byBsb2dpbiwgaGVyZSBpcyB0aGUgb3V0cHV0IHdlIGdvdFxuIgogICAgICAgIHByaW50IHJlc3VsdAogICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgYWRkX2Jsb2dfcG9zdCh0aXRsZSxwb3N0LHRhZ3MpOgoKICAgIHRyeToKICAgICAgICBwcmludCAiVHJ5aW5nIHRvIHN1Ym1pdCBhIHBvc3Qgd2l0aCB0aXRsZSAiLCB0aXRsZQogICAgICAgIGRhdGEgPSB1cmxsaWIudXJsZW5jb2RlKFsoImJvZHkiLHBvc3QpLCAoInN1YmplY3QiLHRpdGxlKSwgKCJ0YWdzIix0YWdzKV0pCiAgICAgICAgdXJsID0gImh0dHA6Ly97MH0vbmV3cG9zdCIuZm9ybWF0KHdlYmhvc3QpCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpCiAgICAgICAgY2ouYWRkX2Nvb2tpZV9oZWFkZXIocmVxdWVzdCkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIyLmJ1aWxkX29wZW5lcigpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgbG9naW4KICAgICAgICByZXN1bHQgPSBmLnJlYWQoKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKHRpdGxlICsgIi4rIiArIHBvc3QsIHJlLkRPVEFMTCkKCiAgICAgICAgaWYgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgcHJpbnQgIldoZW4gd2UgdHJpZWQgdG8gcG9zdCwgaGVyZSBpcyB0aGUgb3V0cHV0IHdlIGdvdFxuIgogICAgICAgIHByaW50IHJlc3VsdAogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgYWRkX2Jsb2dfY29tbWVudCh0aXRsZSxwb3N0KToKCiAgICB0cnk6CiAgICAgICAgcHJpbnQgIitUcnlpbmcgdG8gc3VibWl0IGEgYmxvZyBjb21tZW50IGZvciBwb3N0IHdpdGggdGl0bGUiLCB0aXRsZQogICAgICAgIHVybCA9ICJodHRwOi8vezB9L25ld2NvbW1lbnQiLmZvcm1hdCh3ZWJob3N0KQogICAgICAgIAogICAgICAgIGRvYyA9IHt9CiAgICAgICAgY2hlY2tfbW9uZ29fZm9yX3Bvc3QodGl0bGUsIHBvc3QsIGRvYykKCiAgICAgICAgcGVybWFsaW5rID0gZG9jWydkb2MnXVsncGVybWFsaW5rJ10KCiAgICAgICAgY29tbWVudF9uYW1lID0gbWFrZV9zYWx0KDEyKQogICAgICAgIGNvbW1lbnRfYm9keSA9IG1ha2Vfc2FsdCgxMikKCiAgICAgICAgZGF0YSA9IHVybGxpYi51cmxlbmNvZGUoWygiY29tbWVudE5hbWUiLGNvbW1lbnRfbmFtZSksICgiY29tbWVudEJvZHkiLGNvbW1lbnRfYm9keSksICgicGVybWFsaW5rIixwZXJtYWxpbmspXSkKICAgICAgICByZXF1ZXN0ID0gdXJsbGliMi5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBjai5hZGRfY29va2llX2hlYWRlcihyZXF1ZXN0KQogICAgICAgIG9wZW5lciA9IHVybGxpYjIuYnVpbGRfb3BlbmVyKCkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBhZGRpdGlvbiBvZiBjb21tZW50IG9uIHBhZ2UKICAgICAgICByZXN1bHQgPSBmLnJlYWQoKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKHRpdGxlICsgIi4rIiArIHBvc3QsIHJlLkRPVEFMTCkKCiAgICAgICAgaWYgbm90IGV4cHIuc2VhcmNoKHJlc3VsdCk6CiAgICAgICAgICAgIHByaW50ICJXaGVuIHdlIHRyaWVkIHRvIGZpbmQgdGhlIGNvbW1lbnQgd2UgcG9zdGVkIGF0IHRoZSAgIiwgdXJsLCAiIGhlcmUgaXMgd2hhdCB3ZSBnb3QiCiAgICAgICAgICAgIHByaW50IHJlc3VsdAogICAgICAgICAgICByZXR1cm4gRmFsc2UKCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgYWRkaXRpb24gb2YgY29tbWVudC4ucmV0cmlldmUgdGhlIGRvYyBhZ2FpbgogICAgICAgIGlmKG5vdCBjaGVja19tb25nb19mb3JfcG9zdCh0aXRsZSwgcG9zdCwgZG9jKSk6CiAgICAgICAgICAgIHByaW50ICJDb3VsZCBub3QgZmluZCBjb21tZW50IGluIGRhdGFiYXNlIgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBmb3VuZCA9IEZhbHNlCiAgICAgICAgaWYgKCdjb21tZW50cycgaW4gZG9jWydkb2MnXSk6CiAgICAgICAgICAgIGZvciBjb21tZW50IGluIGRvY1snZG9jJ11bJ2NvbW1lbnRzJ106CiAgICAgICAgICAgICAgICBpZiAoY29tbWVudFsnYm9keSddID09IGNvbW1lbnRfYm9keSBhbmQgY29tbWVudFsnYXV0aG9yJ10gPT0gY29tbWVudF9uYW1lKToKICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IFRydWUKCiAgICAgICAgcmV0dXJuIGZvdW5kCgogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIKICAgICAgICByYWlzZQoKICAgICAgICByZXR1cm4gRmFsc2UKCgojIGZldGNoIHRoZSBibG9nIGhvbWUgcGFnZSBhbmQgcmV0dXJuIHRoZSBsaW5rIG9mIHRoZSBmaXJzdCBwb3N0CmRlZiBmZXRjaF9ibG9nX2hvbWVfcGFnZShwb3N0cyk6CgogICAgdHJ5OgogICAgICAgIHVybCA9ICJodHRwOi8vezB9LyIuZm9ybWF0KHdlYmhvc3QpCiAgICAgICAgcHJpbnQgIlRyeWluZyB0byBncmFiIHRoZSBibG9nIGhvbWUgcGFnZSBhdCB1cmwgYW5kIGZpbmQgdGhlIGZpcnN0IHBvc3QuIiwgdXJsCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmw9dXJsKQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpCiAgICAgICAgb3BlbmVyID0gdXJsbGliMi5idWlsZF9vcGVuZXIoKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICAjIExvb2sgZm9yIGEgcG9zdAogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUoIjxhIGhyZWY9XCIoW15cIl0rKVwiXHcqPz4iLCByZS5ET1RBTEwpCgoKICAgICAgICBtYXRjaCA9IGV4cHIuc2VhcmNoKHJlc3VsdCkKCiAgICAgICAgaWYgbWF0Y2ggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHByaW50ICJGb3VudCBhIHBvc3QgdXJsOiAiLCBtYXRjaC5ncm91cCgxKQogICAgICAgICAgICBwb3N0cy5hcHBlbmQobWF0Y2guZ3JvdXAoMSkpCiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIAogICAgICAgIHByaW50ICJIbW0sIGNhbid0IHNlZW0gdG8gZmluZCBhIHBvc3QuIElzIHRoZSBibG9nIHBvcHVsYXRlZCB3aXRoIHBvc3RzPyIKICAgICAgICBwcmludCAiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIGluZGV4IGF0ICIsIHVybCwgIiBoZXJlIGlzIHdoYXQgd2UgZ290IgogICAgICAgIHByaW50IHJlc3VsdAogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIEZhbHNlCgojIGdldHMgdGhlIGxpa2VzIHZhbHVlIG9mZiB0aGUgZmlyc3QgY29tbW1lbnQgb3IgcmV0dXJucyBOb25lCmRlZiBmZXRjaF9saWtlcyh1cmwpOgoKICAgIHRyeToKICAgICAgICB1cmwgPSAiaHR0cDovL3swfXsxfSIuZm9ybWF0KHdlYmhvc3QsIHVybCkKICAgICAgICBwcmludCAiVHJ5aW5nIHRvIGdyYWIgdGhlIG51bWJlciBvZiBsaWtlcyBmb3IgdXJsICIsIHVybAogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIyLlJlcXVlc3QodXJsPXVybCkKICAgICAgICBjai5hZGRfY29va2llX2hlYWRlcihyZXF1ZXN0KQogICAgICAgIG9wZW5lciA9IHVybGxpYjIuYnVpbGRfb3BlbmVyKCkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCgogICAgICAgICMgbGV0J3MgZ2V0IHRoZSBmaXJzdCBmb3JtIGVsZW1lbnQKICAgICAgICByZXN1bHQgPSBmLnJlYWQoKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKCI8Zm9ybVtePl0qPi4qP0xpa2VzOlxzKihcZCspXHMqPC4qPzwvZm9ybT4iLCByZS5ET1RBTEwpCgogICAgICAgIG1hdGNoID0gZXhwci5zZWFyY2gocmVzdWx0KQoKICAgICAgICBpZiBtYXRjaCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcHJpbnQgIkxpa2VzIHZhbHVlICIsIG1hdGNoLmdyb3VwKDEpCiAgICAgICAgICAgIHJldHVybiBpbnQobWF0Y2guZ3JvdXAoMSkpCgogICAgICAgIHByaW50ICJDYW4ndCBmZXRjaCB0aGUgbGlrZSB2YWx1ZSBmb3IgdGhlIGZpcnN0IGNvbW1lbnQuIFBlcmhhcHMgdGhlIGJsb2cgZW50cnkgaGFzIG5vIGNvbW1lbnRzPyIKICAgICAgICBwcmludCAiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIHBlcm1hbGluayBhdCAiLCB1cmwsICIgaGVyZSBpcyB3aGF0IHdlIGdvdCIKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIE5vbmUKCgojIGdldHMgdGhlIGxpa2VzIHZhbHVlIG9mZiB0aGUgZmlyc3QgY29tbW1lbnQgb3IgcmV0dXJucyBOb25lCmRlZiBjbGlja19vbl9saWtlKHBlcm1hbGluayk6CgogICAgcHJpbnQgIkNsaWNraW5nIG9uIExpa2UgbGluayBmb3IgcG9zdDogIiwgcGVybWFsaW5rCiAgICB0cnk6CiAgICAgICAgZXhwciA9ICByZS5jb21waWxlKCJbXi9dKy8oW14vXSspIikKICAgICAgICBtYXRjaCA9IGV4cHIuc2VhcmNoKHBlcm1hbGluaykKICAgICAgICBpZiBtYXRjaCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgcGVybWFsaW5rID0gbWF0Y2guZ3JvdXAoMSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9saWtlIi5mb3JtYXQod2ViaG9zdCkKICAgICAgICAjIHByaW50ICJMaWtlIFBPU1QgdXJsIiwgdXJsCgogICAgICAgIGRhdGEgPSB1cmxsaWIudXJsZW5jb2RlKFsoInBlcm1hbGluayIscGVybWFsaW5rKSwgKCJjb21tZW50X29yZGluYWwiLCIwIildKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIyLlJlcXVlc3QodXJsPXVybCwgZGF0YT1kYXRhKQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpCiAgICAgICAgb3BlbmVyID0gdXJsbGliMi5idWlsZF9vcGVuZXIoKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iCiAgICAgICAgcmFpc2UKCgoKCiMgY29tbWFuZCBsaW5lIGFyZyBwYXJzaW5nIHRvIG1ha2UgZm9sa3MgaGFwcHkgd2hvIHdhbnQgdG8gcnVuIGF0IG1vbmdvbGFicyBvciBtb25nb2hxCiMgdGhpcyBmdW5jdGlvbnMgdXNlcyBnbG9iYWwgdmFycyB0byBjb21tdW5pY2F0ZS4gZm9yZ2l2ZSBtZS4KZGVmIGFyZ19wYXJzaW5nKGFyZ3YpOgoKICAgIGdsb2JhbCB3ZWJob3N0CiAgICBnbG9iYWwgbW9uZ29zdHIKICAgIGdsb2JhbCBkYl9uYW1lCgogICAgdHJ5OgogICAgICAgIG9wdHMsIGFyZ3MgPSBnZXRvcHQuZ2V0b3B0KGFyZ3YsICItcDotbTotZDoiKQogICAgZXhjZXB0IGdldG9wdC5HZXRvcHRFcnJvcjoKICAgICAgICBwcmludCAidXNhZ2UgdmFsaWRhdGUucHkgLXAgd2ViaG9zdCAtbSBtb25nb0Nvbm5lY3RTdHJpbmcgLWQgZGF0YWJhc2VOYW1lIgogICAgICAgIHByaW50ICJcdHdlYmhvc3QgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQod2ViaG9zdCkKICAgICAgICBwcmludCAiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikKICAgICAgICBwcmludCAiXHRkYXRhYmFzZU5hbWUgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQoZGJfbmFtZSkKICAgICAgICBzeXMuZXhpdCgyKQogICAgZm9yIG9wdCwgYXJnIGluIG9wdHM6CiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToKICAgICAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIKICAgICAgICAgICAgc3lzLmV4aXQoMikKICAgICAgICBlbGlmIG9wdCBpbiAoIi1wIik6CiAgICAgICAgICAgIHdlYmhvc3QgPSBhcmcKICAgICAgICAgICAgcHJpbnQgIk92ZXJyaWRpbmcgSFRUUCBob3N0IHRvIGJlICIsIHdlYmhvc3QKICAgICAgICBlbGlmIG9wdCBpbiAoIi1tIik6CiAgICAgICAgICAgIG1vbmdvc3RyID0gYXJnCiAgICAgICAgICAgIHByaW50ICJPdmVycmlkaW5nIE1vbmdvREIgY29ubmVjdGlvbiBzdHJpbmcgdG8gYmUgIiwgbW9uZ29zdHIKICAgICAgICBlbGlmIG9wdCBpbiAoIi1kIik6CiAgICAgICAgICAgIGRiX25hbWUgPSBhcmcKICAgICAgICAgICAgcHJpbnQgIk92ZXJyaWRpbmcgTW9uZ29EQiBkYXRhYmFzZSB0byBiZSAiLCBkYl9uYW1lCiAgICAgICAgICAgIAoKCiMgbWFpbiBzZWN0aW9uIG9mIHRoZSBjb2RlCmRlZiBtYWluKGFyZ3YpOgogICAgICAgICAgICAKICAgIGFyZ19wYXJzaW5nKGFyZ3YpCiAgICBnbG9iYWwgY29ubmVjdGlvbgogICAgZ2xvYmFsIGRiCgogICAgcHJpbnQgIldlbGNvbWUgdG8gdGhlIE0xMDEgRmluYWwgRXhhbSwgUXVlc3Rpb24gNCBWYWxpZGF0aW9uIENoZWNrZXIiCgogICAgIyBjb25uZWN0IHRvIHRoZSBkYiAobW9uZ29zdHIgd2FzIHNldCBpbiBhcmdfcGFyc2luZykKICAgIGNvbm5lY3Rpb24gPSBweW1vbmdvLkNvbm5lY3Rpb24obW9uZ29zdHIsIHNhZmU9VHJ1ZSkKICAgIGRiID0gY29ubmVjdGlvbltkYl9uYW1lXQoKCiAgICAjIGdyYWIgdGhlIGJsb2cgaG9tZSBwYWdlIGFuZCBmaW5kIHRoZSBmaXJzdCBwb3N0CiAgICBwb3N0cyA9IFtdCiAgICBpZiAobm90IGZldGNoX2Jsb2dfaG9tZV9wYWdlKHBvc3RzKSk6CiAgICAgICAgcHJpbnQgIkkgY2FuJ3QgZ3JhYiB0aGUgaG9tZSBwYWdlIG9mIHRoZSBibG9nIgogICAgICAgIHN5cy5leGl0KDEpCgogICAgIyBub3cgZ28gdG8gdGhlIHBlcm1hbGluayBwYWdlIGZvciB0aGF0IHBvc3QKICAgIGxpa2VzX3ZhbHVlID0gZmV0Y2hfbGlrZXMocG9zdHNbMF0pCgogICAgaWYgKGxpa2VzX3ZhbHVlIGlzICBOb25lKToKICAgICAgICBwcmludCAiQ2FuJ3QgZmV0Y2ggdGhlIGxpa2UgdmFsdWUiCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBjbGlja19vbl9saWtlKHBvc3RzWzBdKQoKICAgIG5ld19saWtlc192YWx1ZSA9IGZldGNoX2xpa2VzKHBvc3RzWzBdKQoKICAgIGlmIChuZXdfbGlrZXNfdmFsdWUgIT0gKGxpa2VzX3ZhbHVlICsgMSkpOgogICAgICAgIHByaW50ICJJIHdhcyBub3QgYWJsZSB0byBpbmNyZW1lbnQgdGhlIGxpa2VzIG9uIGEgY29tbWVudCIKICAgICAgICBwcmludCAib2xkIGxpa2VzIHZhbHVlIHdhcyAiLCBsaWtlc192YWx1ZQogICAgICAgIHByaW50ICJsaWtlcyB2YWx1ZSBhZnRlciBJIGNsaWNrZWQgd2FzICIsIG5ld19saWtlc192YWx1ZQogICAgICAgIHByaW50ICJTb3JyeSwgeW91IGhhdmUgbm90IHNvbHZlZCBpdCB5ZXQuIgogICAgICAgIHN5cy5leGl0KDEpCgoKICAgIHByaW50ICJUZXN0cyBQYXNzZWQgZm9yIEZpbmFsIDQuIFlvdXIgdmFsaWRhdGlvbiBjb2RlIGlzIDNmODM3aGhnNjczZ2hkOTNoZ2Y4IgoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKHN5cy5hcmd2WzE6XSkKCgoKCgoKCg=="
eval(compile(base64.b64decode(code), "<string>", 'exec'))
